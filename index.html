<!doctype html>
<html lang="en">

<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
    <script type="text/javascript">
    var student_grade_sum = 0;
    var student_grade_average = 0;
    var student_average_array = [];
    var index = 0;
    var student_grade_as_float = 0;
    // var student_div_highest = $('.student_result').addClass('highlight_highest');
    // var student_div_lowest = $('.student_result').addClass('highlight_lowest');
    var highest_grade = -1;
    var lowest_grade = 101;
    var highest_index = [0];
    var lowest_index = [0];
    var pt_student_array = [];
    var student_object = {
        student_name: null,
        student_course: null,
        student_grade: null
    }


    function populate_student_display() {
        $('.student_container').empty();
        for (var i = 0; i < pt_student_array.length; i++) {
            var delete_button = $("<button>", {
                type: 'button',
                class: 'button glyphicon glyphicon-remove-sign',
                id: 'delete_button',
            });

            var student_summary = $("<div>", {
                class: 'student_result row',
                id: student_id[i]
            });
            var name_div = $("<div>", {
                class: 'student_result col-xs-3 col-sm-3 col-md-3 col-lg-3 page_font',
                text: pt_student_array[i].student_name
            });
            var course_div = $("<div>", {
                class: 'student_result col-xs-3 col-sm-3 col-md-3 col-lg-3 page_font',
                text: pt_student_array[i].student_course
            });
            var grade_div = $("<div>", {
                class: 'student_grade_div col-xs-3 col-sm-3 col-md-3 col-lg-3 page_font',
                text: pt_student_array[i].student_grade
            });
            $(".student_container").append(student_summary, name_div, course_div, grade_div, delete_button);
        };


        // clear_student_array()

    };


    function call_student_info_and_average() {

        student_info();
        pt_student_average_array();
        clear_student_info();
        populate_student_display();
        pt_highest_lowest();
        highlight_highest();
        highlight_lowest();
    }

    function clear_student_info() {
        student_object.student_name = $('#student_name').val('');
        student_object.student_course = $('#student_course').val('');
        student_object.student_grade = $('#student_grade').val(null);
    }

    function student_info() {
        var student_initialize = Object.create(student_object);
        student_initialize.student_name = $('#student_name').val();
        student_initialize.student_course = $('#student_course').val();
        student_initialize.student_grade = parseFloat($('#student_grade').val());
        console.log("student object: ", student_object);
        pt_student_array.push(student_initialize);
    }


    function pt_student_average_array() {
        for (var i = 0; i < pt_student_array.length; i++) {
            student_grade_as_float = parseFloat(pt_student_array[i].student_grade);
            student_grade_sum = parseFloat(student_grade_sum) + parseFloat(student_grade_as_float);

        }
        var avg = student_grade_sum / parseFloat(pt_student_array.length);
        student_grade_sum = 0;
        $('#grade_average > span').html(avg);
    }

    function pt_highest_lowest() {
        highest_index = [0];
        lowest_index = [0];
        lowest_grade = pt_student_array[0].student_grade;
        highest_grade = pt_student_array[0].student_grade;
        for (var i = 0; i < pt_student_array.length; i++) {
            if (pt_student_array[i].student_grade == highest_grade) {
                highest_index.push(i);
            }
            if (pt_student_array[i].student_grade > highest_grade) {
                highest_grade = pt_student_array[i].student_grade;
                highest_index = [i];
                console.log("highest grade: ", highest_grade);

            }
            if (pt_student_array[i].student_grade == lowest_grade) {
                lowest_index.push(i);
            }
            if (pt_student_array[i].student_grade < lowest_grade) {
                lowest_grade = pt_student_array[i].student_grade;
                lowest_index = [i];
                console.log("lowest grade: ", lowest_grade);

            }
        }
    }

    function highlight_highest() {
        for (var i = 0; i < highest_index.length; i++) {
            console.log("highest index:", highest_index);
            $('.student_grade_div').eq(highest_index[i]).addClass('highlight_highest');
        }
    }

    function highlight_lowest() {
        for (var i = 0; i < lowest_index.length; i++) {
            $('.student_grade_div').eq(lowest_index[i]).addClass('highlight_lowest');
        }
    }

    $(document).ready(function() {
        $('#add_student').click(function() {
            call_student_info_and_average();

        });
    });
    //    $('.student_result').eq(highest_grade).addClass('highlight_highest');
    </script>
</head>

<body>
    <h1 class="page_font page_header">Student Grade Table</h1>
    <section id="student_info">
        <div class="student_container container-fluid">
            <span class="col-xs-3 col-sm-3 col-md-3 col-lg-3 student_columns page_font">Student Name</span>
            <span class="col-xs-3 col-sm-3 col-md-3 col-lg-3 student_columns page_font">Course</span>
            <span class="col-xs-3 col-sm-3 col-md-3 col-lg-3 student_columns page_font">Grade</span>
            <span class="col-xs-3 col-sm-3 col-md-3 col-lg-3 student_columns page_font">Action</span>
        </div>
    </section>
    <section id="student_id" class="container-fluid">
        <form role="form" class="student_form " id="student_form_container">
            <div class="form-group page_font">
                <input type="text" name="student_name" class="student_input page_font form-control" id="student_name" placeholder="Student Name">
            </div>
            <div class="form-group page_font">
                <input type="text" name="student_course" class="student_input page_font form-control" id="student_course" placeholder="Student Course">
            </div>
            <div class="form-group page_font">
                <input type="text" name="student_grade" class="student_input page_font form-control" id="student_grade" placeholder="Student Grade (0-100)">
            </div>
            <button type="button" class="button glyphicon glyphicon-user" id="add_student">+</button>
        </form>
    </section>
    <div id="grade_average" class="col-sm-2-offset-10 page_font">Average Grade: <span></span></div>
</body>

</html>
