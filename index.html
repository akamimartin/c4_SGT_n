 <!doctype html>
<html>

<head>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <style>
    #buttonid {
        
    }
    
    
    
    </style>
    <script>
        sum_of_grades = null;
        grades_array = [];
        highest_lowest = [];
        var student_array = [];

        function averageGrade() {
            for (var i = 0; i < student_array.length; i++) {
                grades_array.push(student_array[i].grade);

                sum_of_grades += parseFloat(student_array[i].grade);
            }
            highest_lowest.push(grades_array.sort[0]);
            highest_lowest.push(grades_array.sort[-1]);
            average_of_grades = sum_of_grades / student_array.length;
        };
         //$('#grade_average > span').append(average_of_grades);


        function add_studentinfo() {
            var new_student = {
                name: $("#student_name").val(),
                course: $("#student_course").val(),
                grade: $("#student_grade").val()
            }

            student_array.push(new_student);

            for (var i = 0; i < student_array.length; i++) {
                /*  $('<div>',{
                class: "student_container0",
              }); */
                var newdiv = $('<div class="student_data" "col-sm-12">');
                var name_output = $('<span class="col-sm-6">').text(student_array[i].name);
                var course_output = $('<span class="col-sm-4">').text(student_array[i].course);
                var grade_output = $('<span class="col-sm-1">').text(student_array[i].grade);
                var delete_output = $('<button class="col-sm-1" id="buttonid">').text("Delete");
                //if (i==0){
                //refresh();
                // };
                newdiv.append(name_output, course_output, grade_output,delete_output);
                $('#student_info').append(newdiv);
                console.log("student_array=" + student_array[i]);
                console.log("student array at " + i + " = ", student_array[i]);

            }

        }

        function list_students() {

            $('#student_info').remove($('.student_data'));

            //containerinfo.append(name_output,course_output, grade_output);
            //$(".student_container").append(containerinfo);
        }
   /*  $(document).ready(function(){  */
function send_studentinfo(){

	console.log('click initiated');
   
	$.ajax({
  		url:'http://s-apis.learningfuze.com/sgt/create',
  		dataType:'html',
  		//data: {name: $('.name').val(),  grade: $('.grade').val() , course:$('.course').val() },
        data: {name: 'Adam',  grade: 98, course:'English' },

  		method: 'POST',
  		cache: false,
  		crossDomain: true, 
  		success: function(response){
  			console.log('success result - respons==', response);
            $('.name').text(response);
            $('.grade').text(response);
            $('.course').text(response);


  			//message.html('');
  			// if(response.success) {
  			 	$('#data_display').html(response);
      	}		
           	 		
  	});
 }   
 

function get_student_data() {
    $.ajax({
        dataType: 'json',
        url: 'http://s-apis.learningfuze.com/sgt/get',
        success: function(response) {
            window.response = response;
            console.log('loaded', response);
            student_array = student_array.concat(response.data);
            for (var i = 0; i < student_array.length; i++) {
                student_array[i].grade = parseFloat(student_array[i].grade)
            }
            list_students();
        }
    });
}
 
  	/*console.log('load ended');   */
        
        
        
    </script>
</head>

<body>
    <section id="student_info">
        <div class="student_container">
            <span class="col-sm-6">Student Name</span>
            <span class="col-sm-4">Student Course</span>
            <span class="col-sm-2">Student Grade</span>
        </div>
    </section>
    <div id="grade_average" class="col-sm-2 col-sm-offset-10">Average: <span></span>
    </div>
    <section id="student_input">
        <input type="text" name="student_name" id="student_name" placeholder="Student Name">
        <input type="text" name="student_course" id="student_course" placeholder="Student Course">
        <input type="text" name="student_grade" id="student_grade" placeholder="Student Grade (0-100)">
        <button type="button" onclick="add_studentinfo()">Add Student</button>
        <button type="button2" onclick="send_studentinfo()">Send Student</button>
        <button type="button3" onclick="get_student_data">Get Student</button>
        <!--<button type="button">Delete Student</button> -->
    </section>
     <div id='data_display'>
     </div>


</body>

</html>
