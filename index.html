<!doctype html>
<html>

<head>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
    /*****************************
     * Global Variables and Objects
     *******************************/
    var student_array = [];
    var student_object = {
        student_name: null,
        student_course: null,
        student_grade: null
    }
    var color_count = 0;
    var highest_grade_indeces = [0];
    var lowest_grade_indeces = [0];


    /***************************
     *   Function definitions
     *******************************/

     /*************************************************
      * add_student- creates student object and pushes onto student_array
      * 
      *************************************/
    function add_student() {
        if ($('#student_name').val() == '' || $('#student_course').val() == '' || $('#student_grade').val() == '') {
          $('.alert').remove();
          var checkInputAlert = $('<div>').addClass('alert alert-danger col-sm-12 col-md-12').text('Please fill out form completely.');
          $('#student_input').append(checkInputAlert);
          return;
        }
        if(parseFloat($('#student_grade').val()) >= 101 || parseFloat($('#student_grade').val()) <= -1)
        {
          $('.alert').remove();
          var invalidNumAlert = $('<div>').addClass('alert alert-danger col-sm-12 col-md-12').text('Please enter a valid number.');
          $('#student_input').append(invalidNumAlert);
          return;
        }
        $('.alert').remove();
        var addstudent = Object.create(student_object);
        addstudent.student_name = $('#student_name').val();
        addstudent.student_course = $('#student_course').val();
        addstudent.student_grade = parseFloat($('#student_grade').val());
        student_array.push(addstudent);
        $('input').val('');
        list_students();
    }

    /*************************************************
      *
      * 
      *************************************/
    function list_students() {
        var background_color = '';
        var color = '';

        $('.student_list').empty();
        for (var i = 0; i < student_array.length; i++) {
            var student_info_container = $('<div>').addClass('student_information col-sm-12 well').css('background-color', background_color);
            var sname = $('<div>').addClass('sname col-sm-3').text(student_array[i].student_name);
            var scourse = $('<div>').addClass('scourse col-sm-3').text(student_array[i].student_course);
            var sgrade = $('<div>').addClass('sgrade col-sm-3').text(student_array[i].student_grade);
            var delete_button = $('<button>').addClass('delete col-sm-2').text('Delete');
            $(student_info_container).append(sname, scourse, sgrade, delete_button)
            $('.student_list').append(student_info_container);
        }
        if(student_array.length > 1)
        {
        calc_avg();
        high_low();
        highlight_grade();
      }
    }

      /*************************************************
      *
      * 
      *************************************/

    function calc_avg() {
        var avg = 0;
        var sum = 0;
        for (var i = 0; i < student_array.length; i++) {
            sum += student_array[i].student_grade;
        }
        avg = parseFloat(sum) / parseFloat(student_array.length);
        avg = avg.toFixed(2);
        $('#grade_average > span').html(avg);
    }

      /*************************************************
      *
      * 
      *************************************/
    function delete_student() {
        var id = prompt("Please input the ID of the student you would like to delete");
        if (student_array[id] == undefined) {
            return;
        } else {
            alert(student_array[id].student_name + " was removed from the list");
            student_array.splice(id, 1);
        }
    }

      /*************************************************
      *
      * 
      *************************************/
    function high_low() {
        highest_grade_indeces = [0];
        lowest_grade_indeces = [0];
        var highest_grade = student_array[0].student_grade;
        var lowest_grade = student_array[0].student_grade;
        for (var i = 0; i < student_array.length; i++) {
            //highest check
            if (student_array[i].student_grade == highest_grade) {
                highest_grade_indeces.push(i);
            }
            if (student_array[i].student_grade > highest_grade) {

                highest_grade_indeces = [i];
                highest_grade = student_array[i].student_grade;
            }
            if (student_array[i].student_grade == lowest_grade) {
                lowest_grade_indeces.push(i);
            }
            //lowest check
            if (student_array[i].student_grade < lowest_grade) {
                lowest_grade_indeces = [i];
                lowest_grade = student_array[i].student_grade;
            }

        }
    }


      /*************************************************
      *
      * 
      *************************************/
    function highlight_grade() {

            for (var i = 0; i < highest_grade_indeces.length; i++) {
                $('.sgrade').eq(highest_grade_indeces[i]).addClass('highest_style glyphicon glyphicon-star');

            }
            for (var i = 0; i < lowest_grade_indeces.length; i++) {
                $('.sgrade').eq(lowest_grade_indeces[i]).addClass('lowest_style glyphicon glyphicon-alert');
            }
        }


        /********************
         * Program Execution
         ********************/

    $(document).ready(function() {
        $('.add_student').click(add_student);
        $('.delete_student').on('click', delete_student);


    });
    </script>
</head>

<body>
    <section id="student_info" class="col-sm-8">
        <div class="student_container well col-sm-12">
            <span class="col-sm-3">Student Name</span>
            <span class="col-sm-3">Student Course</span>
            <span class="col-sm-3">Student Grade</span>
            <div id="grade_average" class="col-sm-3">Average: <span></span></div>
        </div>
        <div class="student_list col-sm-12"></div>
    </section>
    <section id="student_input" class="well col-sm-4 col-md-4">
        <input type="text" class="input_info"name="student_name" id="student_name" placeholder="Student Name">
        <input type="text" class="input_info" name="student_course" id="student_course" placeholder="Student Course">
        <input type="text" class="input_info" name="student_grade" id="student_grade" placeholder="Student Grade (0-100)">
        <button type="button" class="add_student">Add Student</button>
        <button type="button" class="delete_student">Delete Student</button>
    </section>
</body>

</html>
